package com.github.intuit.innersource.reposcanner.commands.report;

import com.google.common.collect.Sets;
import java.util.List;
import java.util.SortedSet;
import org.assertj.core.api.Assertions;
import org.assertj.core.util.Lists;
import org.junit.Test;

public class GitHubFilePathPrecedenceComparatorTest {

    @Test
    public void testCompareNullsAreEqual() {
        Assertions
            .assertThat(GitHubFilePathPrecedenceComparator.INSTANCE.compare(null, null))
            .isEqualTo(0);
    }

    @Test
    public void testFirstNonNullAndSecondNull() {
        Assertions
            .assertThat(
                GitHubFilePathPrecedenceComparator.INSTANCE.compare("/README.md", null)
            )
            .isLessThan(0);
    }

    @Test
    public void testComprehensiveOrdering() {
        final SortedSet<String> sortedSet = Sets.newTreeSet(
            GitHubFilePathPrecedenceComparator.INSTANCE
        );

        sortedSet.add("/.GITHUB/README.MD");
        sortedSet.add("/.GITHUB/ReadMe.Md");
        sortedSet.add("/docs/ReadMe.txt");
        sortedSet.add("/docs/readme.txt");
        sortedSet.add("/.GITHUB/CONTRIBUTING.MD");
        sortedSet.add("/.GITHUB/CONtributing.Md");
        sortedSet.add("/.GITHUB/contributing.md");
        sortedSet.add("/.GITHUB/CONTRIBUTING");
        sortedSet.add("/Docs/ReadMe.a");
        sortedSet.add("/Docs/readme.a");
        sortedSet.add("/Docs/README.TXT");
        sortedSet.add("/Docs/ReadMe.txt");
        sortedSet.add("/Docs/readme.txt");
        sortedSet.add("/docs/README.MD");
        sortedSet.add("/docs/ReadMe.Md");
        sortedSet.add("/.GITHUB/CONtributing");
        sortedSet.add("/.GITHUB/contributing");
        sortedSet.add("/.GITHUB/CONTRIBUTING.A");
        sortedSet.add("/.GITHUB/readme.md");
        sortedSet.add("/.GITHUB/ReadMe.a");
        sortedSet.add("/this/could/be/root/.GITHUB/README.MD");
        sortedSet.add("/this/could/be/root/.GITHUB/ReadMe.Md");
        sortedSet.add("/.GITHUB/README");
        sortedSet.add("/.GITHUB/ReadMe");
        sortedSet.add("/.GITHUB/README.A");
        sortedSet.add("/this/could/be/root/.GITHUB/readme.md");
        sortedSet.add("/this/could/be/root/.GITHUB/README");
        sortedSet.add("/.GITHUB/readme");
        sortedSet.add("/this/could/be/root/.GITHUB/ReadMe");
        sortedSet.add("/this/could/be/root/.GITHUB/readme");
        sortedSet.add("/.GITHUB/readme.a");
        sortedSet.add("/.GITHUB/README.TXT");
        sortedSet.add("/this/could/be/root/.GITHUB/README.A");
        sortedSet.add("/this/could/be/root/.GITHUB/ReadMe.a");
        sortedSet.add("/this/could/be/root/.GITHUB/readme.a");
        sortedSet.add("/.GITHUB/ReadMe.txt");
        sortedSet.add("/.GITHUB/readme.txt");
        sortedSet.add("/this/could/be/root/.GITHUB/README.TXT");
        sortedSet.add("/this/could/be/root/.GITHUB/ReadMe.txt");
        sortedSet.add("/this/could/be/root/.GITHUB/readme.txt");
        sortedSet.add("/.GitHub/README.MD");
        sortedSet.add("/.GitHub/ReadMe.Md");
        sortedSet.add("/.GitHub/readme.md");
        sortedSet.add("/this/could/be/root/.GitHub/README.MD");
        sortedSet.add("/this/could/be/root/.GitHub/ReadMe.Md");
        sortedSet.add("/.GitHub/README");
        sortedSet.add("/.GitHub/ReadMe");
        sortedSet.add("/.GitHub/readme.txt");
        sortedSet.add("/this/could/be/root/.GitHub/readme.md");
        sortedSet.add("/this/could/be/root/.GitHub/README");
        sortedSet.add("/this/could/be/root/.GitHub/ReadMe");
        sortedSet.add("/.GitHub/readme");
        sortedSet.add("/this/could/be/root/.GitHub/readme");
        sortedSet.add("/this/could/be/root/ReadMe.txt");
        sortedSet.add("/this/could/be/root/readme.txt");
        sortedSet.add("/DOCS/README.MD");
        sortedSet.add("/DOCS/ReadMe.Md");
        sortedSet.add("/DOCS/readme.md");
        sortedSet.add("/DOCS/README");
        sortedSet.add("/DOCS/ReadMe");
        sortedSet.add("/DOCS/readme");
        sortedSet.add("/this/could/be/root/.GitHub/README.A");
        sortedSet.add("/this/could/be/root/.GitHub/ReadMe.a");
        sortedSet.add("/DOCS/README.A");
        sortedSet.add("/DOCS/ReadMe.a");
        sortedSet.add("/DOCS/readme.a");
        sortedSet.add("/DOCS/README.TXT");
        sortedSet.add("/this/could/be/root/.GitHub/readme.a");
        sortedSet.add("/.github/readme.a");
        sortedSet.add("/.github/README.TXT");
        sortedSet.add("/.github/ReadMe.txt");
        sortedSet.add("/.github/readme.txt");
        sortedSet.add("/this/could/be/root/.github/README.MD");
        sortedSet.add("/.GitHub/ReadMe.a");
        sortedSet.add("/.GitHub/readme.a");
        sortedSet.add("/this/could/be/root/.github/ReadMe.Md");
        sortedSet.add("/this/could/be/root/.github/readme.md");
        sortedSet.add("/this/could/be/root/.github/README");
        sortedSet.add("/.GitHub/README.A");
        sortedSet.add("/.GitHub/README.TXT");
        sortedSet.add("/.GitHub/ReadMe.txt");
        sortedSet.add("/this/could/be/root/.github/ReadMe");
        sortedSet.add("/this/could/be/root/.GitHub/README.TXT");
        sortedSet.add("/this/could/be/root/.GitHub/ReadMe.txt");
        sortedSet.add("/this/could/be/root/.GitHub/readme.txt");
        sortedSet.add("/.github/README.MD");
        sortedSet.add("/.github/ReadMe.Md");
        sortedSet.add("/.github/readme.md");
        sortedSet.add("/.github/README");
        sortedSet.add("/this/could/be/root/.github/readme");
        sortedSet.add("/this/could/be/root/.github/README.A");
        sortedSet.add("/.github/ReadMe");
        sortedSet.add("/.github/readme");
        sortedSet.add("/.github/README.A");
        sortedSet.add("/.github/ReadMe.a");
        sortedSet.add("/this/could/be/root/.github/ReadMe.a");
        sortedSet.add("/this/could/be/root/.github/readme.a");
        sortedSet.add("/ReadMe.a");
        sortedSet.add("/readme.a");
        sortedSet.add("/README.TXT");
        sortedSet.add("/this/could/be/root/README.MD");
        sortedSet.add("/this/could/be/root/ReadMe.Md");
        sortedSet.add("/this/could/be/root/readme.md");
        sortedSet.add("/this/could/be/root/README");
        sortedSet.add("/ReadMe.txt");
        sortedSet.add("/readme.txt");
        sortedSet.add("/this/could/be/root/ReadMe");
        sortedSet.add("/this/could/be/root/readme");
        sortedSet.add("/this/could/be/root/.github/README.TXT");
        sortedSet.add("/README.MD");
        sortedSet.add("/ReadMe.Md");
        sortedSet.add("/readme.md");
        sortedSet.add("/README");
        sortedSet.add("/this/could/be/root/.github/ReadMe.txt");
        sortedSet.add("/this/could/be/root/.github/readme.txt");
        sortedSet.add("/ReadMe");
        sortedSet.add("/readme");
        sortedSet.add("/README.A");
        sortedSet.add("/this/could/be/root/README.A");
        sortedSet.add("/this/could/be/root/ReadMe.a");
        sortedSet.add("/DOCS/ReadMe.txt");
        sortedSet.add("/DOCS/readme.txt");
        sortedSet.add("/Docs/README.MD");
        sortedSet.add("/Docs/ReadMe.Md");
        sortedSet.add("/this/could/be/root/readme.a");
        sortedSet.add("/this/could/be/root/README.TXT");
        sortedSet.add("/Docs/readme.md");
        sortedSet.add("/Docs/README");
        sortedSet.add("/Docs/ReadMe");
        sortedSet.add("/Docs/readme");
        sortedSet.add("/Docs/README.A");
        sortedSet.add("/.GITHUB/contributing.a");
        sortedSet.add("/.GITHUB/CONTRIBUTING.TXT");
        sortedSet.add("/docs/readme.md");
        sortedSet.add("/docs/README");
        sortedSet.add("/docs/ReadMe");
        sortedSet.add("/docs/readme");
        sortedSet.add("/.GITHUB/CONtributing.a");
        sortedSet.add("/.GITHUB/CONtributing.txt");
        sortedSet.add("/docs/README.A");
        sortedSet.add("/docs/ReadMe.a");
        sortedSet.add("/docs/readme.a");
        sortedSet.add("/docs/README.TXT");
        sortedSet.add("/.GITHUB/contributing.txt");
        sortedSet.add("/some/other/file.txt");
        sortedSet.add((String) null);

        final List<String> expectedSortOrder = Lists.newArrayList();
        expectedSortOrder.add("/.GITHUB/README.MD");
        expectedSortOrder.add("/.GITHUB/ReadMe.Md");
        expectedSortOrder.add("/.GITHUB/readme.md");
        expectedSortOrder.add("/.GITHUB/README");
        expectedSortOrder.add("/.GITHUB/ReadMe");
        expectedSortOrder.add("/.GITHUB/readme");
        expectedSortOrder.add("/.GITHUB/README.A");
        expectedSortOrder.add("/.GITHUB/ReadMe.a");
        expectedSortOrder.add("/.GITHUB/readme.a");
        expectedSortOrder.add("/.GITHUB/README.TXT");
        expectedSortOrder.add("/.GITHUB/ReadMe.txt");
        expectedSortOrder.add("/.GITHUB/readme.txt");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/README.MD");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/ReadMe.Md");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/readme.md");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/README");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/ReadMe");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/readme");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/README.A");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/ReadMe.a");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/readme.a");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/README.TXT");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/ReadMe.txt");
        expectedSortOrder.add("/this/could/be/root/.GITHUB/readme.txt");
        expectedSortOrder.add("/.GitHub/README.MD");
        expectedSortOrder.add("/.GitHub/ReadMe.Md");
        expectedSortOrder.add("/.GitHub/readme.md");
        expectedSortOrder.add("/.GitHub/README");
        expectedSortOrder.add("/.GitHub/ReadMe");
        expectedSortOrder.add("/.GitHub/readme");
        expectedSortOrder.add("/.GitHub/README.A");
        expectedSortOrder.add("/.GitHub/ReadMe.a");
        expectedSortOrder.add("/.GitHub/readme.a");
        expectedSortOrder.add("/.GitHub/README.TXT");
        expectedSortOrder.add("/.GitHub/ReadMe.txt");
        expectedSortOrder.add("/.GitHub/readme.txt");
        expectedSortOrder.add("/this/could/be/root/.GitHub/README.MD");
        expectedSortOrder.add("/this/could/be/root/.GitHub/ReadMe.Md");
        expectedSortOrder.add("/this/could/be/root/.GitHub/readme.md");
        expectedSortOrder.add("/this/could/be/root/.GitHub/README");
        expectedSortOrder.add("/this/could/be/root/.GitHub/ReadMe");
        expectedSortOrder.add("/this/could/be/root/.GitHub/readme");
        expectedSortOrder.add("/this/could/be/root/.GitHub/README.A");
        expectedSortOrder.add("/this/could/be/root/.GitHub/ReadMe.a");
        expectedSortOrder.add("/this/could/be/root/.GitHub/readme.a");
        expectedSortOrder.add("/this/could/be/root/.GitHub/README.TXT");
        expectedSortOrder.add("/this/could/be/root/.GitHub/ReadMe.txt");
        expectedSortOrder.add("/this/could/be/root/.GitHub/readme.txt");
        expectedSortOrder.add("/.github/README.MD");
        expectedSortOrder.add("/.github/ReadMe.Md");
        expectedSortOrder.add("/.github/readme.md");
        expectedSortOrder.add("/.github/README");
        expectedSortOrder.add("/.github/ReadMe");
        expectedSortOrder.add("/.github/readme");
        expectedSortOrder.add("/.github/README.A");
        expectedSortOrder.add("/.github/ReadMe.a");
        expectedSortOrder.add("/.github/readme.a");
        expectedSortOrder.add("/.github/README.TXT");
        expectedSortOrder.add("/.github/ReadMe.txt");
        expectedSortOrder.add("/.github/readme.txt");
        expectedSortOrder.add("/this/could/be/root/.github/README.MD");
        expectedSortOrder.add("/this/could/be/root/.github/ReadMe.Md");
        expectedSortOrder.add("/this/could/be/root/.github/readme.md");
        expectedSortOrder.add("/this/could/be/root/.github/README");
        expectedSortOrder.add("/this/could/be/root/.github/ReadMe");
        expectedSortOrder.add("/this/could/be/root/.github/readme");
        expectedSortOrder.add("/this/could/be/root/.github/README.A");
        expectedSortOrder.add("/this/could/be/root/.github/ReadMe.a");
        expectedSortOrder.add("/this/could/be/root/.github/readme.a");
        expectedSortOrder.add("/this/could/be/root/.github/README.TXT");
        expectedSortOrder.add("/this/could/be/root/.github/ReadMe.txt");
        expectedSortOrder.add("/this/could/be/root/.github/readme.txt");
        expectedSortOrder.add("/README.MD");
        expectedSortOrder.add("/ReadMe.Md");
        expectedSortOrder.add("/readme.md");
        expectedSortOrder.add("/README");
        expectedSortOrder.add("/ReadMe");
        expectedSortOrder.add("/readme");
        expectedSortOrder.add("/README.A");
        expectedSortOrder.add("/ReadMe.a");
        expectedSortOrder.add("/readme.a");
        expectedSortOrder.add("/README.TXT");
        expectedSortOrder.add("/ReadMe.txt");
        expectedSortOrder.add("/readme.txt");
        expectedSortOrder.add("/this/could/be/root/README.MD");
        expectedSortOrder.add("/this/could/be/root/ReadMe.Md");
        expectedSortOrder.add("/this/could/be/root/readme.md");
        expectedSortOrder.add("/this/could/be/root/README");
        expectedSortOrder.add("/this/could/be/root/ReadMe");
        expectedSortOrder.add("/this/could/be/root/readme");
        expectedSortOrder.add("/this/could/be/root/README.A");
        expectedSortOrder.add("/this/could/be/root/ReadMe.a");
        expectedSortOrder.add("/this/could/be/root/readme.a");
        expectedSortOrder.add("/this/could/be/root/README.TXT");
        expectedSortOrder.add("/this/could/be/root/ReadMe.txt");
        expectedSortOrder.add("/this/could/be/root/readme.txt");
        expectedSortOrder.add("/DOCS/README.MD");
        expectedSortOrder.add("/DOCS/ReadMe.Md");
        expectedSortOrder.add("/DOCS/readme.md");
        expectedSortOrder.add("/DOCS/README");
        expectedSortOrder.add("/DOCS/ReadMe");
        expectedSortOrder.add("/DOCS/readme");
        expectedSortOrder.add("/DOCS/README.A");
        expectedSortOrder.add("/DOCS/ReadMe.a");
        expectedSortOrder.add("/DOCS/readme.a");
        expectedSortOrder.add("/DOCS/README.TXT");
        expectedSortOrder.add("/DOCS/ReadMe.txt");
        expectedSortOrder.add("/DOCS/readme.txt");
        expectedSortOrder.add("/Docs/README.MD");
        expectedSortOrder.add("/Docs/ReadMe.Md");
        expectedSortOrder.add("/Docs/readme.md");
        expectedSortOrder.add("/Docs/README");
        expectedSortOrder.add("/Docs/ReadMe");
        expectedSortOrder.add("/Docs/readme");
        expectedSortOrder.add("/Docs/README.A");
        expectedSortOrder.add("/Docs/ReadMe.a");
        expectedSortOrder.add("/Docs/readme.a");
        expectedSortOrder.add("/Docs/README.TXT");
        expectedSortOrder.add("/Docs/ReadMe.txt");
        expectedSortOrder.add("/Docs/readme.txt");
        expectedSortOrder.add("/docs/README.MD");
        expectedSortOrder.add("/docs/ReadMe.Md");
        expectedSortOrder.add("/docs/readme.md");
        expectedSortOrder.add("/docs/README");
        expectedSortOrder.add("/docs/ReadMe");
        expectedSortOrder.add("/docs/readme");
        expectedSortOrder.add("/docs/README.A");
        expectedSortOrder.add("/docs/ReadMe.a");
        expectedSortOrder.add("/docs/readme.a");
        expectedSortOrder.add("/docs/README.TXT");
        expectedSortOrder.add("/docs/ReadMe.txt");
        expectedSortOrder.add("/docs/readme.txt");
        expectedSortOrder.add("/.GITHUB/CONTRIBUTING.MD");
        expectedSortOrder.add("/.GITHUB/CONtributing.Md");
        expectedSortOrder.add("/.GITHUB/contributing.md");
        expectedSortOrder.add("/.GITHUB/CONTRIBUTING");
        expectedSortOrder.add("/.GITHUB/CONtributing");
        expectedSortOrder.add("/.GITHUB/contributing");
        expectedSortOrder.add("/.GITHUB/CONTRIBUTING.A");
        expectedSortOrder.add("/.GITHUB/CONtributing.a");
        expectedSortOrder.add("/.GITHUB/contributing.a");
        expectedSortOrder.add("/.GITHUB/CONTRIBUTING.TXT");
        expectedSortOrder.add("/.GITHUB/CONtributing.txt");
        expectedSortOrder.add("/.GITHUB/contributing.txt");
        expectedSortOrder.add("/some/other/file.txt");
        expectedSortOrder.add((String) null);

        int i = 0;
        for (final String path : sortedSet) {
            Assertions.assertThat(path).isEqualTo(expectedSortOrder.get(i++));
        }
    }
}
